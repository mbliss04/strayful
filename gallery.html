<!DOCTYPE html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<meta name="description" content="Products and media from Stray co.">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>Stray | Gallery</title>
		<script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
		<script type="text/javascript" src="js/ga.js"></script>
		<script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
		<script type="text/javascript" src="js/slider.js"></script>
		<script type="text/javascript">
			function ajax_json_gallery(folder) {
				var results = $('.gallery-ul');
				var hr = new XMLHttpRequest();
				hr.open("POST", "json_gallery.php", true);
				hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				hr.onreadystatechange = function() {
					if (hr.readyState == 4 && hr.status == 200) {
						var d = JSON.parse(hr.responseText);
						$('.gallery-ul').css({'opacity':'0'});
						$('.gallery-ul').innerHTML = "";
						for (var o in d) {
							if (d[o].src) {
								$('.gallery-ul').append('<li class="gallery-li '+
									d[o].category+'"><a href="'+d[o].url+'" onclick="gallerydown('+"'"+d[o].name+"')"+'"><img class="gallery-img" src="'+d[o].src+'"/></a></li>');
							}
						}
						$('.gallery-ul').animate ({
							opacity: 1
						}, 1000);
					}
				}
				hr.send("folder="+folder);
				$('.gallery-ul').innerHTML = 'Content loading...';
			};
		</script>
		<script type="text/javascript">
			// fills gallery with only categorized elements
			function reveal(element) {
				if ($('.product-wrapper').hasClass('shown')) {
					galleryup();
					window.setTimeout( categorize(), 1000 );  
				}
				else {
					categorize();
				}
				function categorize() {
					var count = 0;
					var temp;
					// gets type of element
					//var type = $(this)[0].className.split(' ')[1];
			    	$('.gallery-li').each(function() {
			    		temp = $(this);
			    		if ($(this).hasClass(element)) {
			    			$(this).remove();
			    			$('.gallery-ul').prepend(temp);
			    			count++;
			    		}
			    		else if ($(this).hasClass('filler')) {
			    			$(this).remove()
			    		}
			    		else {
			    			$(this).remove();
			    			$('.gallery-ul').append(temp);
			    		}
			    	});

			    	var last_image = count-1;
			    	var filler_image = "<li class='gallery-li filler'><a href='#'><img src='images/gallery/filler.jpg'></a></li>";
			    	while (count < 5) {
			    		if (last_image < 0) {
			    			$('.gallery-ul.').prepend(filler_image);
			    		}
			    		else {
			    			$(".gallery-li").eq(last_image).after(filler_image);
			    		}
			    		count++;
			    	}
			    }

			};

			// isolates single gallery image
			function gallerydown(image) {
				var source = 'src="images/gallery/'+image+'"></a>';
				var productdisplay = '<a href="#" onclick="galleryup()"><img '+source;
				var productcontent = '<div id="title">'+image+'</div><hr><p></p><hr>';
				$('.product').empty();
				$('#content').empty();
				$('.gallery-ul').switchClass('moveup', 'movedown', 500);
				$('.product-wrapper').switchClass('nodisplay', 'displayed', 0);
				$('.product').append(productdisplay);
				$('#content').append(productcontent);
				$('.product-wrapper').switchClass('hidden', 'shown', 1000);
			};

			// reveals entire gallery again
			function galleryup() {
				$('.product-wrapper').switchClass('shown', 'hidden', 1000);
				$('.gallery-ul').css({'opacity':0});
				window.setTimeout( function changeBack() {
					$('.gallery-ul').switchClass('movedown', 'moveup', 0);
					$('.gallery-ul').animate ({
						opacity: 1
					}, 1000);
					$('.product-wrapper').switchClass('displayed', 'nodisplay', 500);
				}, 300);
			}

		</script>
		<script type="text/javascript" src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<link rel="shortcut icon" href="images/favicon.ico"> 
		<!--Stylesheets-->
		<link rel="stylesheet" href="stylesheets/css/reset.css">
		<link rel="stylesheet" href="amaticfont/stylesheet.css">
		<link rel="stylesheet" href="stylesheets/css/styles.css">
	</head>
	<body>
		<script type="text/javascript">
			<!--//--><![CDATA[//><!--
			document.write( '<div id="content-wrapper">' );
			ajax_json_gallery("images/gallery");
			//--><!]]>
		</script>
		<div class="menu-bar opened">
			<div class="menu-nav">
				<ul>
					<li><a href="gallery.html" class="transition">Gallery</a></li>
					<li><a href="values.html" class="transition">Values</a></li>
					<li><a href="media.html" class="transition">#Strayful</a></li>
					<li><a href="contact.html" class="transition">Contact</a></li>
				</ul>
			</div>
			<div class="logo"></div>
			<div class="close"></div>
		</div>
		<div class="menu-open closed"></div>
		<div class="gallery-options hidden">
			<ul class="left">
				<li class="middle"><a href="#" onclick="reveal('p')">Ponchos</a></li>
				<li class="norm"><a href="#" onclick="reveal('bb')">Board Bags</a></li>
				<li class="norm"><a href="#" onclick="reveal('all')">Everything</a><li>
			</ul>
			<ul class="right">
				<li class="middle"><a href="#" onclick="reveal('wd')">Wet/Dry Bags</a></li>
				<li class="norm"><a href="#" onclick="reveal('kk')">Knick-Knacks</a></li>
				<li class="norm"><a href="#" onclick="reveal('tp')">Teepees</a></li>
			</ul>
		</div>
		<div class="gallery-wrapper">
			<div class="gallery-mask">
				<ul class="gallery-ul"></ul>
			</div>
			<div class="leftbtn">
				<div class="leftbtn-inner"></div>
			</div>
			<div class="rightbtn">
				<div class="rightbtn-inner"></div>
			</div>
		</div>
		<div class="product-wrapper hidden nodisplay">
			<div id="entireproduct">
				<div class="product-frame">
					<div class="product"></div>
				</div>
				<div class="product-descrip">
					<div id="descrip">
						<div id="content"></div>
						<ul id="social">
							<li><a href="https://twitter.com/intent/tweet?url=https://strayful.com/images/gallery/&related=Strayful,twitterapi">Twitter</a></li>
							<li><a href="#" 
									onclick="window.open(
									    'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), 
									    'facebook-share-dialog', 
									    'width=626,height=436'); 
									    return false;">Facebook</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<script type="text/javascript">
			<!--//--><![CDATA[//><!--
			document.write( '</div><!-- content-wrapper -->' );
			//--><!]]>
		</script>
	</body>
</html>
